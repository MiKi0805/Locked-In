[gd_scene load_steps=6 format=3 uid="uid://c2cuhklajgtuu"]

[ext_resource type="PackedScene" uid="uid://kb07bgnpx8at" path="res://Scenes/Components/health_system.tscn" id="1_du01r"]
[ext_resource type="Script" path="res://Scripts/Characters' Scripts/challenger.gd" id="1_u7hqv"]
[ext_resource type="Script" path="res://Scripts/Components' Scripts/bullet_direction_system.gd" id="3_bq87b"]
[ext_resource type="PackedScene" uid="uid://w7tystem8ay4" path="res://Scenes/Objects/trail.tscn" id="4_t263m"]

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_ahn6x"]
polygon = PackedVector2Array(-10, -25, 10, -25, 25, -10, 25, 10, 10, 25, -10, 25, -25, 10, -25, -10)

[node name="Challenger" type="CharacterBody2D" groups=["enemy"]]
light_mask = 7
collision_layer = 4
collision_mask = 0
script = ExtResource("1_u7hqv")

[node name="spawn" type="Timer" parent="."]
unique_name_in_owner = true
one_shot = true

[node name="merge timer" type="Timer" parent="."]

[node name="Texture" type="Polygon2D" parent="."]
light_mask = 4
visibility_layer = 4
color = Color(0.886275, 0.109804, 0.380392, 1)
polygon = PackedVector2Array(-10, -25, 10, -25, 25, -10, 25, 10, 10, 25, -10, 25, -25, 10, -25, -10)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="."]
modulate = Color(1, 1, 1, 0.529412)
polygon = PackedVector2Array(-5, -20, -20, -5, -20, 5, -5, 20, 5, 20, 20, 5, 20, -5, 5, -20)
disabled = true

[node name="Health system" parent="." instance=ExtResource("1_du01r")]
is_enemy = true

[node name="Area2D" parent="Health system" index="0"]
collision_mask = 2

[node name="CollisionPolygon2D" parent="Health system/Area2D" index="0"]
polygon = PackedVector2Array(-5, -20, -20, -5, -20, 5, -5, 20, 5, 20, 20, 5, 20, -5, 5, -20)

[node name="Bullet direction system" type="Node2D" parent="."]
script = ExtResource("3_bq87b")

[node name="Area2D" type="Area2D" parent="Bullet direction system"]
collision_layer = 0
collision_mask = 2

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Bullet direction system/Area2D"]
modulate = Color(0.219608, 0.0862745, 0.192157, 1)
polygon = PackedVector2Array(-10, -45, 10, -45, 45, -10, 45, 10, 10, 45, -10, 45, -45, 10, -45, -10)

[node name="LightOccluder2D" type="LightOccluder2D" parent="."]
light_mask = 9
visibility_layer = 9
occluder = SubResource("OccluderPolygon2D_ahn6x")
occluder_light_mask = 9

[node name="Trail" parent="." node_paths=PackedStringArray("target") instance=ExtResource("4_t263m")]
follow_mouse = false
target = NodePath("..")
thickness = 30.0
color = Color(0.886275, 0.109804, 0.380392, 0.541176)
max_point = 100

[node name="Combine" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 4

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Combine"]
self_modulate = Color(1, 1, 1, 0.0352941)
polygon = PackedVector2Array(-11, -26, 11, -26, 26, -11, 26, 11, 11, 26, -11, 26, -26, 11, -26, -11)

[connection signal="timeout" from="spawn" to="." method="wait_timeout"]
[connection signal="timeout" from="merge timer" to="." method="merge_ready"]
[connection signal="hp_zero" from="Health system" to="." method="_hp_zero"]
[connection signal="direction_read" from="Bullet direction system" to="Health system" method="bullet_approach_direction"]
[connection signal="body_entered" from="Bullet direction system/Area2D" to="Bullet direction system" method="bullet_enter"]
[connection signal="body_entered" from="Combine" to="." method="ready_to_combine"]

[editable path="Health system"]
